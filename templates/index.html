{% extends "base.html" %}
{% block title %}Gallery{% endblock %}

{% block content %}
<section class="gallery-header">
  <h1>Gallery</h1>
</section>

{% if photos %}
  <div class="photo-grid">
    {% for photo in photos %}
      <a class="photo-card" href="{{ url_for('photo', photo_id=photo['id']) }}">
        <div class="photo-card-img-wrap">
          {% if photo['media_type'] == 'video' %}
            <video autoplay muted loop playsinline preload="metadata">
              <source src="{{ photo['cloudinary_url'] }}">
            </video>
          {% else %}
            <img
              src="{{ photo['cloudinary_url'] }}"
              alt="{{ photo['caption'] or 'Photo' }}"
              loading="lazy"
            >
          {% endif %}
          {% if photo['image_count'] > 1 %}
            <span class="multi-photo-badge">&#10697; {{ photo['image_count'] }}</span>
          {% endif %}
        </div>
        <div class="photo-card-caption">
          {% if photo['caption'] %}<span class="photo-card-caption-text">{{ photo['caption'] }}</span>{% endif %}
          <span class="photo-card-date">{{ photo['created_at'][:10] }}</span>
        </div>
      </a>
    {% endfor %}
  </div>
{% else %}
  <p class="empty-state">No photos yet. Check back soon!</p>
{% endif %}
{% endblock %}
